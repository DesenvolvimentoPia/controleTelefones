<?php

// Arquivo de Corpo

include "../conexao.php";

if(!empty($_POST['hiddenTransp'])){
?>

<style> #home {	display: none;} #transportadoras { display: block;} </style>

<?php	
}

else if(!empty($_POST['hiddenEstados'])){
?>

<style> #home {	display: none;} #estados { display: block;} </style>

<?php		
}

else if(!empty($_POST['hiddenHistorico'])){
?>

<style> #home {	display: none;} #historico { display: block;} </style>

<?php		
}

?>

<body>

<main>
	
<header>
	<h1>Cadastro Telefones - PIÁ</h1>

	<nav>
		<a href="#home" class="acao selecionado">Home</a>
		<a href="#telefones" class="acao">Telefones</a>
		<a href="#chips" class="acao">Chips</a>
		<a href="#linhas" class="acao">Linhas</a>
		<a href="#historico" class="acao">Histórico</a>
		<a href="../">Relatórios</a>
		<a href="../logout.php">Logout</a>
	</nav>

</header>

<section id="home">
	<p>Olá, <strong>Thiago Santos</strong>. Use o Menu Superior para Navegar.</p>
</section>



<section id="telefones" ng-app="appTelefones" ng-controller="myCtrlTelefones">
	<h2>Lista de Telefones</h2>

	<div class="tituloResultados">
	<a  class="linkTitulo2 selecionado" ng-click="ordenar2('id');">ID</a><a  class="linkTitulo2" ng-click="ordenar2('marca');">Marca</a><a  class="linkTitulo2" ng-click="ordenar2('modelo');">Modelo</a><a  class="linkTitulo2" ng-click="ordenar2('usuario');">Usuário</a>
	</div>

	<div class="linhaResultado {{x.situacao}}" ng-repeat="x in recordsTelefones | orderBy:myOrderBy2">
		<div class="colunaResultado2">{{x.id}}</div><div class="colunaResultado2">{{x.marca}}</div><div class="colunaResultado2">{{x.modelo}}</div><div class="colunaResultado2">{{x.usuario}}</div>
	</div>

	<script>

	$(function() {
		$('.linkTitulo2').click(function() {
			var elementos = document.getElementsByClassName('linkTitulo2');

		for (var x = 0; x < elementos.length; x++) {
			elementos[x].className = "linkTitulo2";
		}

		this.className = "linkTitulo2 selecionado";

		});
	});

	var app = angular.module("appTelefones", []);
	app.controller("myCtrlTelefones", function($scope) {
    
    $scope.recordsTelefones = [

	<?php

	$sql = "SELECT * FROM relatorios_telefones ORDER BY id DESC";
	$res = mysql_query($sql, $con);
	$num = mysql_num_rows($res);

	for($i = 0; $i < $num; $i++) {
	$row = mysql_fetch_array($res);
		if($i == 0) echo "{";
		else echo ", {";
		echo "'id': ".$row['id'].", 'marca': '".$row['marca']."', 'modelo': '".$row['modelo']."', 'situacao': '".$row['situacao']."', 'usuario': '".$row['usuario']."' }";
	}
	
	?>

    ];
      $scope.ordenar2 = function(x) {
	    $scope.myOrderBy2 = x;
	  }
});
</script>

</section>



<section id="chips">
	<h2>Lista de Chips</h2>
</section>



<section id="linhas">
	<h2>Lista de Linhas</h2>
</section>



<section id="historico" ng-app="appHistorico" ng-controller="myCtrlHistorico">
	<h2>Consultar Histórico</h2>

	<div class="tituloResultados">
		<a class="linkTitulo2 selecionado" ng-click="ordenar2('diaHora');">Dia e Hora</a><a  class="linkTitulo2" ng-click="ordenar2('evento');">Evento</a><a  class="linkTitulo2" ng-click="ordenar2('descricao');">Descrição</a><a  class="linkTitulo2" ng-click="ordenar2('usuario');">Usuário</a>
	</div>

	<div class="linhaResultado" ng-repeat="x in records | orderBy:myOrderBy2">
		<div class="colunaResultado2">{{x.diaHora}}</div><div class="colunaResultado2">{{x.evento}}</div><div class="colunaResultado2">{{x.descricao}}</div><div class="colunaResultado2">{{x.usuario}}</div>
	</div>

	<script>

	$(function() {
		$('.linkTitulo2').click(function() {
			var elementos = document.getElementsByClassName('linkTitulo2');

		for (var x = 0; x < elementos.length; x++) {
			elementos[x].className = "linkTitulo2";
		}

		this.className = "linkTitulo2 selecionado";

		});
	});

	var app = angular.module("appHistorico", []);
	app.controller("myCtrlHistorico", function($scope) {
    
    $scope.records = [

	<?php

	$sql = "SELECT relatorios_historico.id, relatorios_historico.nome, hora, descricao, relatorios_usuarios.nome AS usuario FROM relatorios_historico LEFT JOIN relatorios_usuarios ON relatorios_historico.id_usuario = relatorios_usuarios.id  WHERE sistema = 2 OR sistema = 0 ORDER BY relatorios_historico.id DESC";
	$res = mysql_query($sql, $con);
	$num = mysql_num_rows($res);

	for($i = 0; $i < $num; $i++) {
	$row = mysql_fetch_array($res);
		if($i == 0) echo "{";
		else echo ", {";
		echo "'diaHora': '".$row['hora']."', 'evento': '".$row['nome']."', 'descricao': '".$row['descricao']."', 'usuario': '".$row['usuario']."' }";
	}
	
	?>

    ];
      $scope.ordenar2 = function(x) {
	    $scope.myOrderBy2 = x;
	  }
});
</script>

</section>

</main>

</body>